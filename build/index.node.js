/*! For license information please see index.node.js.LICENSE.txt */
(()=>{"use strict";var e={476:(e,t,r)=>{r.d(t,{Z:()=>n});const n={RENDER:"render",SHOW_LOADER:"showLoader",RETURN_NULL:"returnNull",REDIRECT_TO_LOGIN:"redirectToLogin",REDIRECT_TO_APP:"redirectToApp"}},248:(e,t,r)=>{r.d(t,{$1:()=>s,Qm:()=>a,_n:()=>u,cJ:()=>c});var n=r(962),i=()=>(0,n.i)().cookies.name,o=()=>(0,n.i)().cookies.unified,s=()=>{var e=i();return o()?e:"".concat(e,".AuthUser")},a=()=>"".concat(s(),".sig"),u=()=>{var e=i();return o()?e:"".concat(e,".AuthUserTokens")},c=()=>"".concat(u(),".sig")},620:(e,t,r)=>{r.d(t,{Y:()=>i});var n=["aud","auth_time","email","email_verified","exp","firebase","iat","iss","name","phone_number","picture","sub","uid","user_id"],i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return Object.keys(e).forEach((r=>{n.includes(r)||(t[r]=e[r])})),t}},962:(e,t,r)=>{r.d(t,{i:()=>m,v:()=>v});var n,i=r(838),o=r.n(i),s=r(779),a=r.n(s),u=r(106),c=r(493),h=["cookies"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=12096e5,p={debug:!1,loginAPIEndpoint:void 0,logoutAPIEndpoint:void 0,onLoginRequestError:void 0,onLogoutRequestError:void 0,tokenChangedHandler:void 0,onVerifyTokenError:()=>{},onTokenRefreshError:()=>{},authPageURL:void 0,appPageURL:void 0,firebaseAdminInitConfig:void 0,firebaseClientInitConfig:void 0,firebaseAuthEmulatorHost:void 0,cookies:{name:void 0,keys:void 0,domain:void 0,httpOnly:!0,maxAge:6048e5,overwrite:!0,path:"/",sameSite:"strict",secure:!0,signed:!0,unified:!1}},g=e=>{var t=[];e.tokenChangedHandler&&(e.loginAPIEndpoint&&t.push('The "loginAPIEndpoint" setting should not be set if you are using a "tokenChangedHandler".'),e.logoutAPIEndpoint&&t.push('The "logoutAPIEndpoint" setting should not be set if you are using a "tokenChangedHandler".'),e.onLoginRequestError&&t.push('The "onLoginRequestError" setting should not be set if you are using a "tokenChangedHandler".'),e.onLogoutRequestError&&t.push('The "onLogoutRequestError" setting should not be set if you are using a "tokenChangedHandler".')),e.firebaseClientInitConfig&&e.firebaseClientInitConfig.apiKey||t.push('The "firebaseClientInitConfig.apiKey" value is required.'),e.firebaseAuthEmulatorHost&&e.firebaseAuthEmulatorHost.startsWith("http")&&t.push("The firebaseAuthEmulatorHost should be set without a prefix (e.g., localhost:9099)");var r=["function","undefined"];r.indexOf(typeof e.onVerifyTokenError)<0&&t.push('Invalid next-firebase-auth options: The "onVerifyTokenError" setting must be a function.'),r.indexOf(typeof e.onTokenRefreshError)<0&&t.push('Invalid next-firebase-auth options: The "onTokenRefreshError" setting must be a function.'),r.indexOf(typeof e.onLoginRequestError)<0&&t.push('Invalid next-firebase-auth options: The "onLoginRequestError" setting must be a function.'),r.indexOf(typeof e.onLogoutRequestError)<0&&t.push('Invalid next-firebase-auth options: The "onLogoutRequestError" setting must be a function.');var{keys:n}=e.cookies,i=n&&n.length&&(!n.filter||n.filter((e=>void 0!==e)).length);return(0,u.Z)()?(e.tokenChangedHandler||(e.loginAPIEndpoint||t.push('The "loginAPIEndpoint" setting is required.'),e.logoutAPIEndpoint||t.push('The "logoutAPIEndpoint" setting is required.')),e.firebaseAdminInitConfig&&e.firebaseAdminInitConfig.credential&&e.firebaseAdminInitConfig.credential.privateKey&&t.push('The "firebaseAdminInitConfig" private key setting should not be available on the client side.'),i&&t.push('The "cookies.keys" setting should not be available on the client side.')):(e.cookies.name||t.push('The "cookies.name" setting is required on the server side.'),e.firebaseAuthEmulatorHost&&(process.env.FIREBASE_AUTH_EMULATOR_HOST?process.env.FIREBASE_AUTH_EMULATOR_HOST!==e.firebaseAuthEmulatorHost&&t.push('The "FIREBASE_AUTH_EMULATOR_HOST" environment variable should be the same as the host set in the config'):t.push('The "FIREBASE_AUTH_EMULATOR_HOST" environment variable should be set if you are using the "firebaseAuthEmulatorHost" option')),e.cookies.maxAge>f&&t.push('The "cookies.maxAge" setting must be less than two weeks ('.concat(f," ms)."))),{isValid:0===t.length,errors:t}},y=e=>l(l({},e),{},{cookies:l(l({},e.cookies),{},{keys:["hidden"]})},e.firebaseAdminInitConfig&&{firebaseAdminInitConfig:l(l({},e.firebaseAdminInitConfig),e.firebaseAdminInitConfig.credential&&{credential:l(l({},e.firebaseAdminInitConfig.credential),{},{privateKey:"hidden",clientEmail:"hidden"})})}),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,c.Z)("[init] Setting config with provided value:",y(e));var{cookies:t={}}=e,r=o()(e,h),i=l(l(l({},p),r),{},{cookies:l(l(l({},p.cookies),t),{},{signed:!t.unified&&t.signed})}),{isValid:s,errors:a}=g(i);if(!s)throw new Error("Invalid next-firebase-auth options: ".concat(a.join(" ")));n=i},m=()=>{if(!n)throw new Error("next-firebase-auth must be initialized before rendering.");return n}},321:(e,t,r)=>{r.d(t,{kT:()=>h,ej:()=>u,d8:()=>c});var n=r(933),i=r.n(n),o=e=>{var t=Buffer.from(e,"base64").toString("utf8");return JSON.parse(t)},s=e=>{var t=JSON.stringify(e);return Buffer.from(t).toString("base64")},a=function(e){var{req:t,res:r}=e,{keys:n,secure:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i()(t,r,{keys:n,secure:o});return s},u=function(e,t){var{req:r,res:n={getHeader:()=>[],setHeader:()=>({call:()=>{}})}}=t,{keys:i,secure:s,signed:u}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(u){var c=i&&i.length&&(!i.filter||i.filter((e=>void 0!==e)).length);if(!c)throw new Error('The "keys" value must be provided when using signed cookies.')}if(!r)throw new Error('The "req" argument is required when calling `getCookie`.');var h=a({req:r,res:n},{keys:i,secure:s}),d=h.get(e,{signed:u});return d?o(d):void 0},c=function(e,t,r){var{req:n,res:i}=r,{keys:o,domain:u,httpOnly:c,maxAge:h,overwrite:d,path:l,sameSite:f,secure:p,signed:g}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(g&&!o)throw new Error('The "keys" value must be provided when using signed cookies.');if(!i)throw new Error('The "res" argument is required when calling `setCookie`.');var y=a({req:n,res:i},{keys:o,secure:p}),v=null==t?void 0:s(t);y.set(e,v,{domain:u,httpOnly:c,maxAge:h,overwrite:d,path:l,sameSite:f,secure:p,signed:g})},h=(e,t,r)=>{c(e,void 0,t,r)}},834:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(779),i=r.n(n),o=r(591),s=r.n(o),a=r(106),u=r(620);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const d=function(){var{firebaseUserClientSDK:e,firebaseUserAdminSDK:t,serializedAuthUser:n,clientInitialized:i=!1,token:o=null,claims:c}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=[e,t,n].reduce(((e,t)=>t?e+1:e),0);if(d>1)throw new Error('createAuthUser cannot receive more than one of the following properties: "firebaseUserClientSDK", "firebaseUserAdminSDK", "serializedAuthUser"');if(i&&(t||n))throw new Error('The "clientInitialized" value can only be true when called with the "firebaseUserClientSDK" property or no user.');if(c&&(t||n))throw new Error('The "claims" value can only be set in conjunction with the "firebaseUserClientSDK" property.');if(o&&!t)throw new Error('The "token" value can only be set if the "firebaseUserAdminSDK" property is defined.');var l={},f=null,p=null,g=!1,y=null,v=null,m=null,k=function(){var e=s()((function*(){return null}));return function(){return e.apply(this,arguments)}}(),b=function(){var e=s()((function*(){}));return function(){return e.apply(this,arguments)}}(),w=null;if(e){if((0,a.Z)()){var{getApp:O}=r(324),{getAuth:A,signOut:T}=r(610);b=function(){var e=s()((function*(){return T(A(O()))}));return function(){return e.apply(this,arguments)}}()}l=(0,u.Y)(c),f=e.uid,p=e.email,g=e.emailVerified,y=e.phoneNumber,v=e.displayName,m=e.photoURL,k=function(){var t=s()((function*(t){return e.getIdToken(t)}));return function(e){return t.apply(this,arguments)}}(),w=null}else if(t)l=(0,u.Y)(t),f=t.uid,p=t.email,g=t.email_verified,y=t.phone_number,v=t.name,m=t.picture,k=function(){var e=s()((function*(){return o}));return function(){return e.apply(this,arguments)}}(),w=o;else if(n){var E=JSON.parse(n);l=E.claims,f=E.id,p=E.email,g=E.emailVerified,y=E.phoneNumber,v=E.displayName,m=E.photoURL,k=function(){var e=s()((function*(){return E._token||null}));return function(){return e.apply(this,arguments)}}(),w=E._token}return{id:f,email:p,emailVerified:g,phoneNumber:y,displayName:v,photoURL:m,claims:l,getIdToken:k,clientInitialized:i,firebaseUser:e||null,signOut:b,serialize:function(){var{includeToken:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return JSON.stringify(h({id:f,claims:l,email:p,emailVerified:g,phoneNumber:y,displayName:v,photoURL:m,clientInitialized:i},e&&{_token:w}))}}}},419:(e,t,r)=>{r.d(t,{_:()=>y,y:()=>g});var n=r(591),i=r.n(n);const o=require("firebase-admin/auth");var s=r(35),a=r(834),u=r(962),c=r(493),h=()=>process.env.FIREBASE_AUTH_EMULATOR_HOST?"http://".concat(process.env.FIREBASE_AUTH_EMULATOR_HOST,"/"):"https://",d=()=>(0,u.i)().firebaseClientInitConfig.apiKey,l=e=>"[verifyIdToken] Error verifying the ID token: ".concat(e,". The user will be unauthenticated."),f=()=>{if("undefined"==typeof fetch)throw new Error("A `fetch` global is required when using next-firebase-auth. See documentation on setting up a `fetch` polyfill.")},p=function(){var e=i()((function*(e){if(!e)throw new Error('The "refreshToken" argument is required.');var t=d(),r="".concat(h(),"securetoken.googleapis.com/v1/token?key=").concat(t),n=yield fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=refresh_token&refresh_token=".concat(e)}),i=yield n.json();if(!n.ok)throw new Error("Problem refreshing token: ".concat(JSON.stringify(i)));return i.id_token}));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=i()((function*(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;f(),(0,s.Z)();var n=e,i=(0,o.getAuth)(),{onTokenRefreshError:h,onVerifyTokenError:d}=(0,u.i)();try{t=yield i.verifyIdToken(e)}catch(e){switch(e.code){case"auth/invalid-user-token":case"auth/user-token-expired":case"auth/user-disabled":n=null,t=null,(0,c.Z)(l(e.code));break;case"auth/id-token-expired":case"auth/argument-error":if(r){(0,c.Z)("[verifyIdToken] The ID token is expired (error code ".concat(e.code,"). Attempting to refresh the ID token."));var g=!1;try{n=yield p(r)}catch(e){g=!0,yield h(e)}if(!g){(0,c.Z)("[verifyIdToken] Successfully refreshed the ID token.");try{t=yield i.verifyIdToken(n)}catch(e){yield d(e),(0,c.Z)(l(e.code))}}g&&(n=null,t=null,(0,c.Z)("[verifyIdToken] Failed to refresh the ID token. The user will be unauthenticated."));break}default:n=null,t=null,yield d(e),(0,c.Z)(l(e.code))}}var y=(0,a.Z)({firebaseUserAdminSDK:t,token:n});return y.id&&(0,c.Z)("[verifyIdToken] Successfully verified the ID token. The user is authenticated."),y}));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=i()((function*(e){f(),(0,s.Z)();var t=yield g(e),r=(0,o.getAuth)();if(!t.id)throw new Error("Failed to verify the ID token.");(0,c.Z)("[setAuthCookies] Getting a refresh token from the ID token.");var n=yield r.createCustomToken(t.id),i=d(),a="".concat(h(),"identitytoolkit.googleapis.com/v1/accounts:signInWithCustomToken?key=").concat(i),u=yield fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n,returnSecureToken:!0})}),l=yield u.json();if(!u.ok)throw(0,c.Z)("[setAuthCookies] Failed to get a refresh token from the ID token."),new Error("Problem getting a refresh token: ".concat(JSON.stringify(l)));var{idToken:p,refreshToken:y}=l;return{idToken:p,refreshToken:y,AuthUser:t}}));return function(t){return e.apply(this,arguments)}}()},741:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(591),i=r.n(n),o=r(834),s=r(321),a=r(419),u=r(248),c=r(962),h=r(493),d=r(35);const l=function(){var e=i()((function*(e){var t,{req:r,includeToken:n=!0,authCookieValue:i,authCookieSigValue:l}=e,{keys:f,secure:p,signed:g,unified:y}=(0,c.i)().cookies;(0,d.Z)();var v=r;if(!r){if(!i)throw new Error('Either "req" or "authCookieValue" must be provided.');var m=n?(0,u._n)():(0,u.$1)(),k=n?(0,u.cJ)():(0,u.Qm)(),b=l?"".concat(k,"=").concat(l,";"):"";v={headers:{cookie:"".concat(m,"=").concat(i,";").concat(l?" ".concat(b):"")}}}if(n){(0,h.Z)("[getUserFromCookies] Attempting to get user info from cookies via the ID token.");var w=(0,s.ej)((0,u._n)(),{req:v},{keys:f,secure:p,signed:g});y&&w&&(w=w.split("|-|")[0]);var{idToken:O,refreshToken:A}=w?JSON.parse(w):{};O?((0,h.Z)("[getUserFromCookies] Successfully retrieved the ID token from cookies."),t=yield(0,a.y)(O,A)):((0,h.Z)("[getUserFromCookies] Failed to retrieve the ID token from cookies. This will happen if the user is not logged in, the provided cookie values are invalid, or the cookie values don't align with your cookie settings. The user will be unauthenticated."),t=(0,o.Z)())}else{if(!g)throw new Error("Cookies must be signed when using withAuthUserSSR.");(0,h.Z)("[getUserFromCookies] Attempting to get user info from cookies (not using the ID token).");var T=(0,s.ej)((0,u.$1)(),{req:v},{keys:f,secure:p,signed:g});y&&T&&(T=T.split("|-|")[1]),T?(0,h.Z)("[getUserFromCookies] Successfully retrieved the user info from cookies."):(0,h.Z)("[getUserFromCookies] Failed to retrieve the user info from cookies. The provided cookie values might be invalid or not align with your cookie settings. The user will be unauthenticated."),t=(0,o.Z)({serializedAuthUser:T})}return t}));return function(t){return e.apply(this,arguments)}}()},35:(e,t,r)=>{r.d(t,{Z:()=>h});var n=r(779),i=r.n(n);const o=require("firebase-admin/app");var s=r(962),a=r(493);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const h=()=>{if(!(0,o.getApps)().length){var{firebaseAdminInitConfig:e,useFirebaseAdminDefaultCredential:t}=(0,s.i)();if(!e&&!t)throw new Error('Missing firebase-admin credentials in next-firebase-auth. Set "firebaseAdminInitConfig", "useFirebaseAdminDefaultCredential", or initialize firebase-admin yourself.');(0,o.initializeApp)(c(c({},e),{},{credential:t?(0,o.applicationDefault)():(0,o.cert)(c({},e.credential))})),(0,a.Z)("[init] Initialized the Firebase admin SDK.")}}},106:(e,t,r)=>{r.d(t,{Z:()=>n});const n=()=>"undefined"!=typeof window},493:(e,t,r)=>{r.d(t,{Z:()=>s,y:()=>o});var n=r(106),i=!1,o=e=>{i=e};const s=function(){if(i){for(var e=(0,n.Z)()?["%cnext-firebase-auth","background: #ffa000; color: #fff; border-radius: 2px; padding: 2px 6px"]:["next-firebase-auth:"],t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];console.log(...e,...r)}}},737:(e,t,r)=>{r.d(t,{U:()=>d,j:()=>l});var n=r(779),i=r.n(n),o=r(962);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u={basePath:!0,permanent:!1},c=e=>{var{ctx:t,AuthUser:r,redirectDestination:n}=e;if("function"==typeof n){var i=n({ctx:t,AuthUser:r});return c({ctx:t,AuthUser:r,redirectDestination:i})}return"string"==typeof n?a(a({},u),{},{destination:n}):"object"==typeof n?a(a({},u),n):null},h=e=>{var{redirectConfigName:t,redirectURL:r,ctx:n,AuthUser:i}=e;return((e,t)=>{if(!t||"string"!=typeof t&&!("destination"in t))throw new Error('The "'.concat(e,'" must be set to a non-empty string, an object literal containing "destination", or a function that returns either.'));return t})(t,c({ctx:n,AuthUser:i,redirectDestination:r||(0,o.i)()[t]}))},d=e=>{var{redirectURL:t,AuthUser:r,ctx:n}=e;return h({redirectConfigName:"authPageURL",redirectURL:t,AuthUser:r,ctx:n})},l=e=>{var{redirectURL:t,AuthUser:r,ctx:n}=e;return h({redirectConfigName:"appPageURL",redirectURL:t,AuthUser:r,ctx:n})}},343:(e,t,r)=>{r.r(t),r.d(t,{AuthUserContext:()=>i,default:()=>o});var n=r(689),i=(0,n.createContext)();const o=()=>{var e=(0,n.useContext)(i);if(!e)throw new Error("When using `useAuthUser`, the page must be wrapped in `withAuthUser`.");return e}},81:(e,t,r)=>{r.d(t,{Z:()=>R});var n=r(838),i=r.n(n),o=r(679),s=r.n(o),a="MODULE_NOT_FOUND",u=r(834),c=r(779),h=r.n(c),d=r(591),l=r.n(d),f=r(689),p=r(324),g=r(610),y=r(962),v=r(620),m=r(493);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){h()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w=function(){var e=l()((function*(e){var t,{loginAPIEndpoint:r,logoutAPIEndpoint:n,onLoginRequestError:i,onLogoutRequestError:o}=(0,y.i)();if(e.id){(0,m.Z)("[withAuthUser] Calling the login endpoint.");var s=yield e.getIdToken();if(!(t=yield fetch(r,{method:"POST",headers:{Authorization:s},credentials:"include"})).ok){var a=yield t.json();(0,m.Z)("[withAuthUser] The call to the login endpoint failed with status ".concat(t.status," and response: ").concat(JSON.stringify(a)));var u=new Error("Received ".concat(t.status," response from login API endpoint: ").concat(JSON.stringify(a)));if(!i)throw u;yield i(u)}}else if((0,m.Z)("[withAuthUser] Calling the logout endpoint."),!(t=yield fetch(n,{method:"POST",credentials:"include"})).ok){var c=yield t.json();(0,m.Z)("[withAuthUser] The call to the logout endpoint failed with status ".concat(t.status," and response: ").concat(JSON.stringify(c)));var h=new Error("Received ".concat(t.status," response from logout API endpoint: ").concat(JSON.stringify(c)));if(!o)throw h;yield o(h)}return t}));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=l()((function*(e){var{tokenChangedHandler:t}=(0,y.i)(),r=(0,u.Z)({firebaseUserClientSDK:e,clientInitialized:!0});return t?((0,m.Z)('[withAuthUser] Calling the custom "tokenChangedHandler" provided in the config.'),t(r)):w(r)}));return function(t){return e.apply(this,arguments)}}();const A=()=>{var[e,t]=(0,f.useState)({user:void 0,claims:{},initialized:!1}),[r,n]=(0,f.useState)(!1);return(0,f.useEffect)((()=>{var e=!1,r=function(){var r=l()((function*(r){(0,m.Z)("[withAuthUser] The Firebase ID token changed. New Firebase user:",r),n(!1);var i={};if(r){var o=yield(0,g.getIdTokenResult)(r);i=(0,v.Y)(o.claims)}t({user:r,claims:i,initialized:!0}),yield O(r),e?(0,m.Z)("[withAuthUser] Component unmounted before completing the auth API request."):(n(!0),(0,m.Z)("[withAuthUser] Completed the auth API request."))}));return function(e){return r.apply(this,arguments)}}(),i=(0,g.onIdTokenChanged)((0,g.getAuth)((0,p.getApp)()),r);return()=>{i(),e=!0}}),[]),b(b({},e),{},{authRequestCompleted:r})};var T=r(476),E=r(106),U=r(737),S=["AuthUserSerialized"];const R=function(){var{whenAuthed:e=T.Z.RENDER,whenUnauthedBeforeInit:t=T.Z.RENDER,whenUnauthedAfterInit:n=T.Z.RENDER,whenAuthedBeforeRedirect:o=T.Z.RETURN_NULL,appPageURL:c=null,authPageURL:h=null,LoaderComponent:d=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l=>{var f,p,g,y,v,k;(0,m.Z)('[withAuthUser] Calling "withAuthUser".');try{f=r(689),({useEffect:p,useCallback:g,useMemo:y}=r(689)),({useRouter:v}=r(853)),({AuthUserContext:k}=r(343))}catch(e){throw e.code===a?new Error('The dependencies "react" and "next" are required when calling `withAuthUser`.'):e}var b=r=>{var{AuthUserSerialized:s}=r,a=i()(r,S),b=y((()=>(0,u.Z)({serializedAuthUser:s})),[s]),{user:w,claims:O,initialized:R,authRequestCompleted:P}=A(),C=y((()=>(0,u.Z)({firebaseUserClientSDK:w,clientInitialized:R,claims:O})),[w,R,O]),I=R?C:b,x=!!I.id,j=I.clientInitialized,D=x&&e===T.Z.REDIRECT_TO_APP,Z=D&&E.Z&&P,_=!x&&(!j&&t===T.Z.REDIRECT_TO_LOGIN||j&&n===T.Z.REDIRECT_TO_LOGIN),q=_&&E.Z&&(t===T.Z.REDIRECT_TO_LOGIN||P),L=v(),N=g((e=>{var{basePath:t,destination:r}=e;!1===t?window.location.replace(r):L.replace(r)}),[L]),H=g((()=>{(0,m.Z)("[withAuthUser] Redirecting to app.");var e=(0,U.j)({AuthUser:I,redirectURL:c});N(e)}),[I,N]),F=g((()=>{(0,m.Z)("[withAuthUser] Redirecting to login.");var e=(0,U.U)({AuthUser:I,redirectURL:h});N(e)}),[I,N]);p((()=>{(0,E.Z)()&&(Z?H():q&&F())}),[Z,q,H,F]);var z,K=d?f.createElement(d,null):null,J=f.createElement(k.Provider,{value:I},f.createElement(l,a));return z=D?o===T.Z.RENDER?J:o===T.Z.SHOW_LOADER?K:null:_?t===T.Z.RETURN_NULL?null:t===T.Z.SHOW_LOADER?K:J:x||P?J:t===T.Z.SHOW_LOADER?K:t===T.Z.RETURN_NULL?null:J,(0,m.Z)("[withAuthUser] Set AuthUser to:",I),z};return b.displayName="WithAuthUserHOC",s()(b,l),b}}},545:(e,t,r)=>{r.d(t,{Z:()=>f});var n=r(779),i=r.n(n),o=r(591),s=r.n(o),a=r(741),u=r(476),c=r(737),h=r(493);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const f=function(){var{whenAuthed:e=u.Z.RENDER,whenUnauthed:t=u.Z.RENDER,appPageURL:r=null,authPageURL:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{useToken:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o=>function(){var d=s()((function*(s){(0,h.Z)('[withAuthUserSSR] Calling "withAuthUserSSR" / "withAuthUserTokenSSR".');var{req:d}=s,f=yield(0,a.Z)({req:d,includeToken:i}),p=f.serialize();if(!f.id&&t===u.Z.REDIRECT_TO_LOGIN)return(0,h.Z)("[withAuthUserSSR] Redirecting to login."),{redirect:(0,c.U)({ctx:s,AuthUser:f,redirectURL:n})};if(f.id&&e===u.Z.REDIRECT_TO_APP)return(0,h.Z)("[withAuthUserSSR] Redirecting to app."),{redirect:(0,c.j)({ctx:s,AuthUser:f,redirectURL:r})};var g={props:{AuthUserSerialized:p}};if(o){s.AuthUser=f;var y=(yield o(s))||{};y&&(y.props?(g=l({},y)).props.AuthUserSerialized=p:(y.notFound||y.redirect)&&(g=l({},y)))}return g}));return function(e){return d.apply(this,arguments)}}()}},933:(e,t,r)=>{var n=r(352)("cookies"),i=r(815),o=r(685),s={},a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,u=/^(?:lax|none|strict)$/i;function c(e,t,r){if(!(this instanceof c))return new c(e,t,r);this.secure=void 0,this.request=e,this.response=t,r&&(Array.isArray(r)?(n('"keys" argument; provide using options {"keys": [...]}'),this.keys=new i(r)):r.constructor&&"Keygrip"===r.constructor.name?(n('"keys" argument; provide using options {"keys": keygrip}'),this.keys=r):(this.keys=Array.isArray(r.keys)?new i(r.keys):r.keys,this.secure=r.secure))}function h(e,t,r){if(!a.test(e))throw new TypeError("argument name is invalid");if(t&&!a.test(t))throw new TypeError("argument value is invalid");for(var e in this.name=e,this.value=t||"",r)this[e]=r[e];if(this.value||(this.expires=new Date(0),this.maxAge=null),this.path&&!a.test(this.path))throw new TypeError("option path is invalid");if(this.domain&&!a.test(this.domain))throw new TypeError("option domain is invalid");if(this.sameSite&&!0!==this.sameSite&&!u.test(this.sameSite))throw new TypeError("option sameSite is invalid")}function d(e,t){if(t.overwrite)for(var r=e.length-1;r>=0;r--)0===e[r].indexOf(t.name+"=")&&e.splice(r,1);e.push(t.toHeader())}c.prototype.get=function(e,t){var r,n,i,o,a,u,c=e+".sig",h=t&&void 0!==t.signed?t.signed:!!this.keys;if((r=this.request.headers.cookie)&&(n=r.match(function(e){return s[e]?s[e]:s[e]=new RegExp("(?:^|;) *"+e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")+"=([^;]*)")}(e)),n)){if(i=n[1],!t||!h)return i;if(o=this.get(c)){if(a=e+"="+i,!this.keys)throw new Error(".keys required for signed cookies");if(!((u=this.keys.index(a,o))<0))return u&&this.set(c,this.keys.sign(a),{signed:!1}),i;this.set(c,null,{path:"/",signed:!1})}}},c.prototype.set=function(e,t,r){var i=this.response,s=this.request,a=i.getHeader("Set-Cookie")||[],u=void 0!==this.secure?!!this.secure:"https"===s.protocol||s.connection.encrypted,c=new h(e,t,r),l=r&&void 0!==r.signed?r.signed:!!this.keys;if("string"==typeof a&&(a=[a]),!u&&r&&r.secure)throw new Error("Cannot send secure cookie over unencrypted connection");if(c.secure=r&&void 0!==r.secure?r.secure:u,r&&"secureProxy"in r&&(n('"secureProxy" option; use "secure" option, provide "secure" to constructor if needed'),c.secure=r.secureProxy),d(a,c),r&&l){if(!this.keys)throw new Error(".keys required for signed cookies");c.value=this.keys.sign(c.toString()),c.name+=".sig",d(a,c)}return(i.set?o.OutgoingMessage.prototype.setHeader:i.setHeader).call(i,"Set-Cookie",a),this},h.prototype.path="/",h.prototype.expires=void 0,h.prototype.domain=void 0,h.prototype.httpOnly=!0,h.prototype.sameSite=!1,h.prototype.secure=!1,h.prototype.overwrite=!1,h.prototype.toString=function(){return this.name+"="+this.value},h.prototype.toHeader=function(){var e=this.toString();return this.maxAge&&(this.expires=new Date(Date.now()+this.maxAge)),this.path&&(e+="; path="+this.path),this.expires&&(e+="; expires="+this.expires.toUTCString()),this.domain&&(e+="; domain="+this.domain),this.sameSite&&(e+="; samesite="+(!0===this.sameSite?"strict":this.sameSite.toLowerCase())),this.secure&&(e+="; secure"),this.httpOnly&&(e+="; httponly"),e},Object.defineProperty(h.prototype,"maxage",{configurable:!0,enumerable:!0,get:function(){return this.maxAge},set:function(e){return this.maxAge=e}}),n.property(h.prototype,"maxage",'"maxage"; use "maxAge" instead'),c.connect=c.express=function(e){return function(t,r,n){t.cookies=r.cookies=new c(t,r,{keys:e}),n()}},c.Cookie=h,e.exports=c},679:(e,t,r)=>{var n=r(469),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function u(e){return n.isMemo(e)?s:a[e.$$typeof]||i}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=s;var c=Object.defineProperty,h=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,l=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,r,n){if("string"!=typeof r){if(p){var i=f(r);i&&i!==p&&e(t,i,n)}var s=h(r);d&&(s=s.concat(d(r)));for(var a=u(t),g=u(r),y=0;y<s.length;++y){var v=s[y];if(!(o[v]||n&&n[v]||g&&g[v]||a&&a[v])){var m=l(r,v);try{c(t,v,m)}catch(e){}}}}return t}},591:e=>{e.exports=require("@babel/runtime/helpers/asyncToGenerator")},779:e=>{e.exports=require("@babel/runtime/helpers/defineProperty")},838:e=>{e.exports=require("@babel/runtime/helpers/objectWithoutProperties")},352:e=>{e.exports=require("depd")},324:e=>{e.exports=require("firebase/app")},610:e=>{e.exports=require("firebase/auth")},815:e=>{e.exports=require("keygrip")},853:e=>{e.exports=require("next/router")},689:e=>{e.exports=require("react")},469:e=>{e.exports=require("react-is")},685:e=>{e.exports=require("http")}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{r.d(n,{default:()=>g});var e=r(962),t=r(493);var i=r(476),o=r(591),s=r.n(o),a=r(419),u=r(321),c=r(248),h=r(834);const d=function(){var r=s()((function*(r,n){var{token:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,t.Z)("[setAuthCookies] Attempting to set auth cookies.");var o=i||r.headers.authorization;if(!o)throw new Error('The request must have an Authorization header value, or you should explicitly provide an ID token to "setAuthCookies".');var s=null,d=null,l=(0,h.Z)();try{({idToken:s,refreshToken:d,AuthUser:l}=yield(0,a._)(o))}catch(e){(0,t.Z)("[setAuthCookies] Failed to verify the ID token. Cannot authenticate the user or get a refresh token.")}var{unified:f,name:p}=(0,e.i)().cookies,g=(e=>{var{domain:t,httpOnly:r,keys:n,maxAge:i,overwrite:o,path:s,sameSite:a,secure:u,signed:c}=e;return{domain:t,httpOnly:r,keys:n,maxAge:i,overwrite:o,path:s,sameSite:a,secure:u,signed:c}})((0,e.i)().cookies);return f?(0,u.d8)(p,"".concat(JSON.stringify({idToken:s,refreshToken:d}),"|-|").concat(l.serialize({includeToken:!1})),{req:r,res:n},g):((0,u.d8)((0,c._n)(),JSON.stringify({idToken:s,refreshToken:d}),{req:r,res:n},g),(0,u.d8)((0,c.$1)(),l.serialize({includeToken:!1}),{req:r,res:n},g)),l.id?(0,t.Z)("[setAuthCookies] Set auth cookies for an authenticated user."):(0,t.Z)("[setAuthCookies] Set auth cookies. The user is not authenticated."),{idToken:s,refreshToken:d,AuthUser:l}}));return function(e,t){return r.apply(this,arguments)}}(),l=function(){var r=s()((function*(r,n){var i=(e=>{var{domain:t,httpOnly:r,keys:n,maxAge:i,overwrite:o,path:s,sameSite:a,secure:u,signed:c}=e;return{domain:t,httpOnly:r,keys:n,maxAge:i,overwrite:o,path:s,sameSite:a,secure:u,signed:c}})((0,e.i)().cookies);(0,u.kT)((0,c._n)(),{req:r,res:n},i),(0,u.kT)((0,c.$1)(),{req:r,res:n},i),(0,t.Z)("[unsetAuthCookies] Unset auth cookies.")}));return function(e,t){return r.apply(this,arguments)}}();var f=r(741),p=r(35);const g={init:r=>{(r=>{(0,t.y)(!0===r.debug),(0,e.v)(r)})(r)},withAuthUser:function(){var e=r(81).Z;return e(...arguments)},useAuthUser:function(){try{r(689)}catch(e){throw new Error('The dependency "react" is required when calling `useAuthUser`.')}var e=r(343).default;return e(...arguments)},withAuthUserSSR:e=>(0,r(545).Z)(e,{useToken:!1}),withAuthUserTokenSSR:e=>(0,r(545).Z)(e,{useToken:!0}),setAuthCookies:d,unsetAuthCookies:l,verifyIdToken:a.y,AuthAction:i.Z,getUserFromCookies:f.Z,initFirebaseAdminSDK:p.Z}})(),module.exports=n.default})();